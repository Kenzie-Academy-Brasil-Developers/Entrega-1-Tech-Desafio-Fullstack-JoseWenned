{
    "openapi": "3.0.3",
    "info": {
        "title": "CRUD the clients and contacts",
        "description": "API for storing customer contacts",
        "version": "1.0.0"
    },
    "servers": [ 
        {
            "url": "http://localhost:3000",
            "description": "Development env"
        },
        {
            "url": "https://onrender-clients-api.com",
            "description": "Production env"
        }
    ],
    "paths": {
        "/login": {
            "post": {
                "description": "Route responsible for client login.",
                "tags": ["Route without parameter."],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/loginClient"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                },
                                "examples": {
                                    "response": {
                                        "value": {
                                            "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwOi8vbXktZG9tYWluLmF1dGgwLmNvbSIsInN1YiI6ImF1dGgwfDEyMzQ1NiIsImF1ZCI6IjEyMzRhYmNkZWYiLCJleHAiOjEzMTEyODE5NzAsImlhdCI6MTMxMTI4MDk3MCwibmFtZSI6IkphbmUgRG9lIiwiZ2l2ZW5fbmFtZSI6IkphbmUiLCJmYW1pbHlfbmFtZSI6IkRvZSJ9.bql-jxlG9B_bielkqOnjTY9Di9FillFb6IMQINXoYsw"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "Invalid credentials."
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [{}]
            }
        },
        "/clients": {
            "post": {
                "description": "Route responsible for client registration.",
                "tags": ["Route without parameter."],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createClient"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "$ref": "#/components/schemas/readClient"
                                },
                                "examples": {
                                    "client": {
                                        "value": {
                                            "id": 8,
                                            "full_name": "babalu Costa",
                                            "email": "babalu@gmail.com",
                                            "admin": false,
                                            "telephone": "889919305497",
                                            "date_register": "2024-02-03"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "conflictErrorEmail": {
                                        "value": {
                                            "message": "E-mail already exists."
                                        }
                                    },
                                    "conflictErrorTelephone": {
                                        "value": {
                                            "message": "Telephone already exists."
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [{}]
            },
            "get": {
                "description": "Route responsible for returning all registered clients.",
                "tags": ["Route only accessed with admin token."],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                },
                                "examples": {
                                    "response": {
                                        "value": [
                                            {
                                                "id": 1,
                                                "full_name": "Administrador do Projeto",
                                                "email": "admin@gmail.com",
                                                "admin": true,
                                                "telephone": "88991989297",
                                                "date_register": "2024-02-08"
                                            },
                                            {
                                                "id": 4,
                                                "full_name": "Tasso Silva Costa",
                                                "email": "tasso@gmail.com",
                                                "admin": false,
                                                "telephone": "88991980597",
                                                "date_register": "2024-02-03"
                                            },
                                            {
                                                "id": 2,
                                                "full_name": "bal costa Silva",
                                                "email": "jubileu12@gmail.com",
                                                "admin": false,
                                                "telephone": "88902021902",
                                                "date_register": "2024-02-09"
                                            },
                                            {
                                                "id": 3,
                                                "full_name": "baloo costa Silva",
                                                "email": "nalo@gmail.com",
                                                "admin": false,
                                                "telephone": "88991983597",
                                                "date_register": "2024-02-09"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/clients/:id": {
            "get": {
                "description": "Route responsible for reading only one client.",
                "tags": ["Route only accessed with admin token."],
                "parameters": [{
                    "schema": {
                        "type": "number"
                    },
                    "in": "query",
                    "description": "Id of the client you want to search.",
                    "name": "id"
                }
            ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "examples": {
                                    "response": {
                                        "value": {
                                            "id": 6,
                                            "full_name": "Silva Neto Noia",
                                            "email": "silva@gmail.com",
                                            "admin": false,
                                            "telephone": "88991980797",
                                            "date_register": "2024-02-03"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "notFound": {
                                        "value": {
                                            "message": "Client not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "description": "Route responsible for updating client.",
                "tags": ["Route with normal client token access."],
                "parameters": [{
                        "schema": {
                            "type": "number"
                        },
                        "in": "query",
                        "description": "Id of the client you want to search.",
                        "name": "id"
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/updateClient"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Client updated successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "examples": {
                                    "response": {
                                        "value": {
                                            "id": 8,
                                            "full_name": "baba Neto Noia",
                                            "email": "babalu@gmail.com",
                                            "admin": false,
                                            "telephone": "889919305497",
                                            "date_register": "2024-02-03"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "notFound": {
                                        "value": {
                                            "message": "Client not found."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "conflictErrorEmail": {
                                        "value": {
                                            "message": "E-mail already exists."
                                        }
                                    },
                                    "conflictErrorTelephone": {
                                        "value": {
                                            "message": "Telephone already exists."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "description": "Route responsible for deleting the client.",
                "tags": ["Route with normal client token access."],
                "parameters": [{
                    "schema": {
                        "type": "number"
                    },
                    "in": "query",
                    "description": "Id of the client you want to search.",
                    "name": "id"
                }],
                "responses": {
                    "204": {
                        "description": "No Body content."
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "notFound": {
                                        "value": {
                                            "message": "Client not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/contacts": {
            "post": {
                "description": "Route resposible for contact registration.",
                "tags": ["Route with normal client token access."],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createContact"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "$ref": "#/components/schemas/readContact"
                                },
                                "examples": {
                                    "contact": {
                                        "value": {
                                            "id": 8,
                                            "full_name": "babalu Costa",
                                            "email": "babalu@gmail.com",
                                            "telephone": "889919305497",
                                            "date_register": "2024-02-03"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "conflictErrorEmail": {
                                        "value": {
                                            "message": "E-mail already exists."
                                        }
                                    },
                                    "conflictErrorTelephone": {
                                        "value": {
                                            "message": "Telephone already exists."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "description": "Route responsible for returning all registered contacts.",
                "tags": ["Route with normal client token access."],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array"
                                },
                                "examples": {
                                    "response": {
                                        "value": [
                                            {
                                                "id": 4,
                                                "full_name": "Tasso Silva Costa",
                                                "email": "tasso@gmail.com",
                                                "telephone": "88991980597",
                                                "date_register": "2024-02-03"
                                            },
                                            {
                                                "id": 2,
                                                "full_name": "bal costa Silva",
                                                "email": "jubileu12@gmail.com",
                                                "telephone": "88902021902",
                                                "date_register": "2024-02-09"
                                            },
                                            {
                                                "id": 3,
                                                "full_name": "baloo costa Silva",
                                                "email": "nalo@gmail.com",
                                                "telephone": "88991983597",
                                                "date_register": "2024-02-09"
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/contacts:id": {
            "get": {
                "description": "Route responsible for reading only one contact.",
                "tags": ["Route with normal client token access."],
                "parameters": [{
                    "schema": {
                        "type": "number"
                    },
                    "in": "query",
                    "description": "Id of the contact you want to search.",
                    "name": "id"
                }
            ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "examples": {
                                    "response": {
                                        "value": {
                                            "id": 6,
                                            "full_name": "Silva Neto Noia",
                                            "email": "silva@gmail.com",
                                            "telephone": "88991980797",
                                            "date_register": "2024-02-03"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "notFound": {
                                        "value": {
                                            "message": "Contact not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "description": "Route responsible for updating contact.",
                "tags": ["Route with normal client token access."],
                "parameters": [{
                        "schema": {
                            "type": "number"
                        },
                        "in": "query",
                        "description": "Id of the contact you want to search.",
                        "name": "id"
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/updateContact"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contact updated successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "examples": {
                                    "response": {
                                        "value": {
                                            "id": 8,
                                            "full_name": "baba Neto Noia",
                                            "email": "babalu@gmail.com",
                                            "telephone": "889919305497",
                                            "date_register": "2024-02-03"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "unauthorized.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "Unauthorized": {
                                        "value": {
                                            "message": "jwt must be provided."
                                        }
                                    },
                                    "UnauthorizedJWT": {
                                        "value": {
                                            "message": "jwt expired."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "forbiddenError": {
                                        "value": {
                                            "message": "Insufficient permissions."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "notFound": {
                                        "value": {
                                            "message": "Contact not found."
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict.",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "conflictErrorEmail": {
                                        "value": {
                                            "message": "E-mail already exists."
                                        }
                                    },
                                    "conflictErrorTelephone": {
                                        "value": {
                                            "message": "Telephone already exists."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "description": "Route responsible for deleting the contact.",
                "tags": ["Route with normal client token access."],
                "parameters": [{
                    "schema": {
                        "type": "number"
                    },
                    "in": "query",
                    "description": "Id of the contact you want to search.",
                    "name": "id"
                }],
                "responses": {
                    "204": {
                        "description": "No Body content."
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "examples": {
                                    "notFound": {
                                        "value": {
                                            "message": "Contact not found."
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "loginClient": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    }
                }
            },
            "createClient": {
                "type": "object",
                "properties": {
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    },
                    "admin": {
                        "type": "boolean"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "date_register": {
                        "type": "string"
                    }
                }   
            },
            "readClient": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "number"
                    },
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "admin": {
                        "type": "boolean"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "date_register": {
                        "type": "string"
                    }
                }
            },
            "readAllClient": {
                "type": "array",
                "properties": {
                    "id": {
                        "type": "number"
                    },
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "admin": {
                        "type": "boolean"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "date_register": {
                        "type": "string"
                    }
                }
            },
            "updateClient": {
                "type": "object",
                "properties": {
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "updateAt": {
                        "type": "string"
                    }
                }
            },
            "deleteClient": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "number"
                    },
                    "deleteAt": {
                        "type": "string"
                    }
                }
            },
            "createContact": {
                "type": "object", 
                "properties": {
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "date_register": {
                        "type": "string"
                    }
                }
            },
            "readContact": {
                "type": "object", 
                "properties": {
                    "id": {
                        "type": "number"
                    },
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "date_register": {
                        "type": "string"
                    }
                }
            },
            "readAllContact": {
                "type": "array", 
                "properties": {
                    "id": {
                        "type": "number"
                    },
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "telephone": {
                        "type": "string"
                    },
                    "date_register": {
                        "type": "string"
                    }
                }
            },
            "updateContact": {
                "type": "object",
                "properties": {
                    "full_name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "telephone": {
                        "type": "string"
                    }
                } 
            },
            "deleteContact": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "number"
                    },
                    "deleteAt": {
                        "type": "string"
                    }
                }
            }
        }
    },
    "security": [
        {
            "JWT": []
        }
    ]
}
